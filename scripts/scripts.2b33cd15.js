"use strict";angular.module("khanApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.ace"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("khanApp").controller("MainCtrl",["$scope",function(a){a.data={passing:!0,hints:{template:[],whitelist:[],blacklist:[]},whitelist:{Keyword:["for","var"]},blacklist:{Keyword:["while"]}},a.templateText='var countUp = function(n){\n  // Start with a for loop. Make sure you add one to n\n  for(var i = 0; i < n + 1; i++){\n    // There should be an if statement in the for loop\n    if(i === n){\n    // Log a message to the console\n      console.log("Almost there ...");\n    }\n    // Log the count\n    console.log(i);\n  }\n};\n// Dont forget to call the function\ncountUp(5);',a.studentText='var countUp = function(n){\n  for(var i = 0; i < n + 1; i++){\n    if(i === n){\n      console.log("Almost there ...");\n    }\n    console.log(i);\n  }\n};\ncountUp(5);';var b=syntactic.specify({whitelist:a.data.whitelist,blacklist:a.data.blacklist}),c="while(true){};";syntactic.specify({whitelist:{Keyword:["for"]},blacklist:{Keyword:["while"]}}).verify(c).then(function(a){console.log(a)});var d=syntactic.outline(a.templateText);a.templateChanged=function(){d=syntactic.outline(a.templateText)},a.studentChanged=function(){var c=d.verify(a.studentText);a.data.passing=c.status,a.data.hints={template:[],whitelist:[],blacklist:[]};for(var e in c.hints)a.data.hints.template.push({type:"alert-warning",hint:c.hints[e]});b.verify(a.studentText).then(function(b){if(b.status===!1){a.data.passing=!1;var c=[];if(b.flags.blacklist)for(var d in b.flags.blacklist){var e=b.flags.blacklist[d],f=Object.keys(e)[0],g=e[f][0].start.line,h={type:"alert-danger",hint:"Dont use ("+d+") "+f+" [line:"+g+"]"};c.push(h),a.data.hints.blacklist=c}var i=[];if(b.flags.whitelist)for(var d in b.flags.whitelist){var e=b.flags.whitelist[d],f=Object.keys(e)[0],h={type:"alert-info",hint:"Be sure to use ("+d+") "+f};i.push(h),a.data.hints.whitelist=i}a.$apply()}})}}]);